#!/bin/bash
# macOS App Bundle Launcher for Nola AI OS
# This acts as a bridge to execute the run.command file in the actual repo

# Calculate repo path relative to this script: .../Nola.app/Contents/MacOS/Nola -> ../../../
# This allows the entire AI_OS folder to be moved or renamed without breaking the app
REPO_PATH="$(cd "$(dirname "$0")/../../.." && pwd)"
COMMAND_FILE="$REPO_PATH/run.command"

if [ -f "$COMMAND_FILE" ]; then
    # Opening a .command file forces macOS to open a new Terminal window and run it
    /usr/bin/open "$COMMAND_FILE"
else
    # Fallback error dialog
    osascript -e 'display dialog "Critical Error: Could not find run.command!\n\nExpected at: '"$REPO_PATH"'/run.command\n\nEnsure Nola.app is located inside the root of the Nola AI OS folder." buttons {"OK"} default button "OK" with icon stop'
fi
