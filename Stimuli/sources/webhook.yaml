# Webhook Stimuli Source (Generic)
# Receives inbound webhooks, processes payloads

name: webhook
type: webhook
enabled: false

poll_interval: 0  # Webhooks are push-based

auth:
  method: none  # Or use HMAC signature verification
  # hmac_secret_env: WEBHOOK_SECRET
  # hmac_header: X-Hub-Signature-256

# Pull: Webhook endpoint configuration
# Your app should expose POST /api/webhooks/{{name}}
pull:
  endpoint: /api/webhooks/inbound
  method: POST
  
  # Map incoming webhook payload
  mapping:
    messages: "$.events"
    id: "$.id"
    thread_id: "$.conversation_id"
    sender_id: "$.sender.id"
    sender_name: "$.sender.name"
    subject: "$.subject"
    body: "$.body"

# Push: Callback URL (if webhook provides one)
push:
  endpoint: "{{callback_url}}"
  method: POST
  
  body_template:
    response: "{{body}}"
    status: "processed"
