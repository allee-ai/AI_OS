# GitHub Stimuli Source
# Pulls notifications, issues, PRs - pushes comments

name: github
type: rest
enabled: false

poll_interval: 300

auth:
  method: bearer
  token_env: GITHUB_TOKEN

# Pull: Get notifications
pull:
  endpoint: https://api.github.com/notifications
  method: GET
  params:
    participating: "true"
    all: "false"
  
  mapping:
    messages: "$"
    id: "$.id"
    thread_id: "$.subject.url"
    sender_id: "$.repository.owner.login"
    sender_name: "$.repository.full_name"
    subject: "$.subject.title"
    body: "$.reason"

# Push: Comment on issue/PR
push:
  endpoint: "{{thread_id}}/comments"
  method: POST
  
  body_template:
    body: "{{body}}"
