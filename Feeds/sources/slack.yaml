# Slack Feeds Source
# Pulls DMs and mentions, pushes to threads

name: slack
type: rest
enabled: false  # Enable after setting up bot token

poll_interval: 60  # More frequent for chat

auth:
  method: bearer
  token_env: SLACK_BOT_TOKEN

# Pull: Get DMs and mentions
pull:
  endpoint: https://slack.com/api/conversations.history
  method: GET
  params:
    limit: 20
  
  mapping:
    messages: "$.messages"
    id: "$.ts"
    thread_id: "$.thread_ts"
    sender_id: "$.user"
    sender_name: "$.user"  # Would need user lookup
    subject: null  # Slack doesn't have subjects
    body: "$.text"

# Push: Reply in thread
push:
  endpoint: https://slack.com/api/chat.postMessage
  method: POST
  
  body_template:
    channel: "{{to}}"
    thread_ts: "{{thread_id}}"
    text: "{{body}}"
