# Twitter/X Feeds Source
# Pulls DMs and mentions, pushes replies

name: twitter
type: rest
enabled: false

poll_interval: 120

auth:
  method: oauth2
  token_path: ~/.aios/tokens/twitter.json
  # Requires OAuth 2.0 User Context

# Pull: Get mentions
pull:
  endpoint: https://api.twitter.com/2/users/{{user_id}}/mentions
  method: GET
  params:
    max_results: 20
    tweet.fields: "created_at,author_id,conversation_id"
    expansions: "author_id"
  
  mapping:
    messages: "$.data"
    id: "$.id"
    thread_id: "$.conversation_id"
    sender_id: "$.author_id"
    sender_name: "$.author_id"  # Need expansion lookup
    subject: null
    body: "$.text"

# Push: Reply to tweet
push:
  endpoint: https://api.twitter.com/2/tweets
  method: POST
  
  body_template:
    text: "{{body}}"
    reply:
      in_reply_to_tweet_id: "{{in_reply_to}}"
